<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef">
  <process id="training_req_employee" name="training_req_employee" isExecutable="true">
    <documentation>Training Request by employee . should be approved by same Department Head ,
Department Manager , Training Head of the organization</documentation>
    <startEvent id="startTrainingRequestEvent" flowable:initiator="initiator"></startEvent>

      <userTask id="emp-request-for-training" name="Emp Request"></userTask>

    <userTask id="head-approval-stage" name="Head Approval"></userTask>
    <exclusiveGateway id="head-approval-gateway"></exclusiveGateway>
    <userTask id="manager-approval" name="Manager Approval"></userTask>


    <exclusiveGateway id="manager-approval-gateway"></exclusiveGateway>

    <serviceTask id="send-mail-task" name="Send mail" flowable:expression="#{emailService.sendEmail()}"></serviceTask>
    <serviceTask id="update-db-task" name="Update the DB" flowable:expression="#{dbService.updateDB()}"></serviceTask>
    <endEvent id="end-task"></endEvent>
    <endEvent id="end-event"></endEvent>
    <sequenceFlow id="seq0" sourceRef="startTrainingRequestEvent" targetRef="emp-request-for-training"></sequenceFlow>
    <sequenceFlow id="seq1" sourceRef="emp-request-for-training" targetRef="head-approval-stage"></sequenceFlow>
    <sequenceFlow id="seq2" sourceRef="head-approval-stage" targetRef="head-approval-gateway"></sequenceFlow>
    <sequenceFlow id="seq3" sourceRef="head-approval-gateway" targetRef="manager-approval">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${headApproved}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="seq4" sourceRef="head-approval-gateway" targetRef="send-mail-task">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!headApproved}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="seq5" sourceRef="manager-approval" targetRef="manager-approval-gateway"></sequenceFlow>
    <sequenceFlow id="seq6" sourceRef="manager-approval-gateway" targetRef="update-db-task">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${managerApproved}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="seq7" sourceRef="manager-approval-gateway" targetRef="send-mail-task">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!managerApproved}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="seq8" sourceRef="send-mail-task" targetRef="end-event"></sequenceFlow>
    <sequenceFlow id="seq9" sourceRef="update-db-task" targetRef="end-task"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_training_req_employee">
    <bpmndi:BPMNPlane bpmnElement="training_req_employee" id="BPMNPlane_training_req_employee">
      <bpmndi:BPMNShape bpmnElement="startTrainingRequestEvent" id="BPMNShape_startTrainingRequestEvent">
        <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="emp-request-for-training" id="BPMNShape_emp-request-for-training">
        <omgdc:Bounds height="80.0" width="100.0" x="175.0" y="138.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="head-approval-stage" id="BPMNShape_head-approval-stage">
        <omgdc:Bounds height="80.0" width="100.0" x="315.0" y="135.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="head-approval-gateway" id="BPMNShape_head-approval-gateway">
        <omgdc:Bounds height="40.0" width="40.0" x="450.0" y="150.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="manager-approval" id="BPMNShape_manager-approval">
        <omgdc:Bounds height="80.0" width="100.0" x="540.0" y="120.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="manager-approval-gateway" id="BPMNShape_manager-approval-gateway">
        <omgdc:Bounds height="40.0" width="40.0" x="675.0" y="135.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="send-mail-task" id="BPMNShape_send-mail-task">
        <omgdc:Bounds height="80.0" width="100.0" x="570.0" y="225.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="update-db-task" id="BPMNShape_update-db-task">
        <omgdc:Bounds height="80.0" width="100.0" x="750.0" y="120.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="end-task" id="BPMNShape_end-task">
        <omgdc:Bounds height="28.0" width="28.0" x="895.0" y="146.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="end-event" id="BPMNShape_end-event">
        <omgdc:Bounds height="28.0" width="28.0" x="794.0" y="251.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="seq4" id="BPMNEdge_seq4">
        <omgdi:waypoint x="482.10988324457185" y="177.8392418032787"></omgdi:waypoint>
        <omgdi:waypoint x="570.0" y="233.39464882943145"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq3" id="BPMNEdge_seq3">
        <omgdi:waypoint x="488.8386538461537" y="168.8846153846154"></omgdi:waypoint>
        <omgdi:waypoint x="540.0" y="164.38891213389124"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq6" id="BPMNEdge_seq6">
        <omgdi:waypoint x="713.6596929422543" y="156.2823394495413"></omgdi:waypoint>
        <omgdi:waypoint x="749.9999999999999" y="157.84688995215313"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq5" id="BPMNEdge_seq5">
        <omgdi:waypoint x="639.9499999999996" y="157.86729857819907"></omgdi:waypoint>
        <omgdi:waypoint x="676.3181818181818" y="156.31613636363636"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq0" id="BPMNEdge_seq0">
        <omgdi:waypoint x="129.9499984899576" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="174.9999999999917" y="178.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq2" id="BPMNEdge_seq2">
        <omgdi:waypoint x="414.9499999999996" y="172.86729857819904"></omgdi:waypoint>
        <omgdi:waypoint x="451.3181818181818" y="171.31613636363636"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq1" id="BPMNEdge_seq1">
        <omgdi:waypoint x="274.95000000000005" y="176.92857142857142"></omgdi:waypoint>
        <omgdi:waypoint x="314.99999999999847" y="176.07035714285715"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq8" id="BPMNEdge_seq8">
        <omgdi:waypoint x="669.9499999999935" y="265.0"></omgdi:waypoint>
        <omgdi:waypoint x="794.0" y="265.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq7" id="BPMNEdge_seq7">
        <omgdi:waypoint x="687.3378378378378" y="167.30824324324325"></omgdi:waypoint>
        <omgdi:waypoint x="647.5454337899544" y="225.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="seq9" id="BPMNEdge_seq9">
        <omgdi:waypoint x="849.949999999996" y="160.0"></omgdi:waypoint>
        <omgdi:waypoint x="895.0" y="160.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>