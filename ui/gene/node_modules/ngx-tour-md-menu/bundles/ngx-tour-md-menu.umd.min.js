!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-tour-core"),require("@angular/material"),require("withinviewport"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-tour-md-menu",["exports","@angular/core","ngx-tour-core","@angular/material","withinviewport","rxjs/operators","@angular/common"],t):t(e["ngx-tour-md-menu"]={},e.ng.core,e.ngxTourCore,e.ng.material,e.withinviewport,e.rxjs.operators,e.ng.common)}(this,function(e,r,n,t,o,i,a){"use strict";o=o&&o.hasOwnProperty("default")?o["default"]:o;var u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function s(e,t){function r(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function c(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return a}var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.decorators=[{type:r.Injectable}],t}(n.TourService),l=function(){function e(){this.menu=new t.MatMenu(undefined,undefined,{xPosition:"after",yPosition:"below",overlapTrigger:!0,backdropClass:""})}return e.decorators=[{type:r.Component,args:[{selector:"tourAnchorOpener",template:'<span [matMenuTriggerFor]="menu" #trigger="matMenuTrigger"></span>',styles:[":host { display: none; }"]}]}],e.propDecorators={menu:[{type:r.Input}],trigger:[{type:r.ViewChild,args:[t.MatMenuTrigger]}]},e}(),d=function(){function e(){}return e.decorators=[{type:r.Injectable}],e}(),m=function(){function e(e){this.renderer=e.createRenderer(null,null)}return e.prototype.show=function(e){var t=e.nativeElement.getBoundingClientRect();this.backdropElement||(this.backdropElement=this.renderer.createElement("div"),this.renderer.addClass(this.backdropElement,"ngx-tour_backdrop"),this.renderer.appendChild(document.body,this.backdropElement)),this.setStyles(t)},e.prototype.close=function(){this.backdropElement&&(this.renderer.removeChild(document.body,this.backdropElement),this.backdropElement=null)},e.prototype.setStyles=function(e){var t,r,n={position:"fixed",width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px","box-shadow":"0 0 0 9999px rgba(0, 0, 0, 0.7)","z-index":"100"};try{for(var o=function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(Object.keys(n)),i=o.next();!i.done;i=o.next()){var a=i.value;this.renderer.setStyle(this.backdropElement,a,n[a])}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:r.RendererFactory2}]},e}(),h=function(){function e(e,t,r,n,o,i,a){this.componentFactoryResolver=e,this.injector=t,this.viewContainer=r,this.element=n,this.tourService=o,this.tourStepTemplate=i,this.tourBackdrop=a,this.opener=this.viewContainer.createComponent(this.componentFactoryResolver.resolveComponentFactory(l)).instance}return e.prototype.ngOnInit=function(){this.tourService.register(this.tourAnchor,this)},e.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},e.prototype.showTourStep=function(e){var t=this;this.isActive=!0,(this.tourStepTemplate.templateComponent.step=e).preventScrolling||(o(this.element.nativeElement,{sides:"bottom"})?o(this.element.nativeElement,{sides:"left top right"})||this.element.nativeElement.scrollIntoView(!0):this.element.nativeElement.scrollIntoView(!1)),this.opener.trigger._element=this.element,this.opener.trigger.menu=this.tourStepTemplate.templateComponent.tourStep,this.opener.trigger.ngAfterContentInit(),this.opener.trigger.openMenu(),e.enableBackdrop?this.tourBackdrop.show(this.element):this.tourBackdrop.close(),e.prevBtnTitle=e.prevBtnTitle||"Prev",e.nextBtnTitle=e.nextBtnTitle||"Next",e.endBtnTitle=e.endBtnTitle||"End",this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.menuCloseSubscription=this.opener.trigger.menuClosed.pipe(i.first()).subscribe(function(){t.tourService.getStatus()!==n.TourState.OFF&&t.tourService.end(),t.tourBackdrop.close()})},e.prototype.hideTourStep=function(){this.isActive=!1,this.menuCloseSubscription&&this.menuCloseSubscription.unsubscribe(),this.opener.trigger.closeMenu(),this.tourService.getStatus()===n.TourState.OFF&&this.tourBackdrop.close()},e.decorators=[{type:r.Directive,args:[{selector:"[tourAnchor]"}]}],e.ctorParameters=function(){return[{type:r.ComponentFactoryResolver},{type:r.Injector},{type:r.ViewContainerRef},{type:r.ElementRef},{type:p},{type:d},{type:m}]},e.propDecorators={tourAnchor:[{type:r.Input}],isActive:[{type:r.HostBinding,args:["class.touranchor--is-active"]}]},e}(),f=function(n){function e(e,t){var r=n.call(this,t)||this;return r.tourStepTemplateService=e,r.tourService=t,r.step={},r}return s(e,n),e.prototype.ngAfterViewInit=function(){this.tourStepTemplateService.templateComponent=this},e.decorators=[{type:r.Component,args:[{selector:"tour-step-template",template:'\n    <mat-menu [overlapTrigger]="false" class="tour-step">\n      <ng-container *ngTemplateOutlet="stepTemplate || defaultTemplate; context: { step: step }"></ng-container>\n    </mat-menu>\n    <ng-template #defaultTemplate let-step="step">\n      <mat-card (click)="$event.stopPropagation()">\n        <mat-card-title>\n          {{step?.title}}\n        </mat-card-title>\n        <mat-card-content>\n          {{step?.content}}\n        </mat-card-content>\n        <mat-card-actions>\n          <button mat-icon-button [disabled]="!tourService.hasPrev(step)" (click)="tourService.prev()">\n            <mat-icon>chevron_left</mat-icon>\n          </button>\n          <button mat-icon-button [disabled]="!tourService.hasNext(step)" (click)="tourService.next()">\n            <mat-icon>chevron_right</mat-icon>\n          </button>\n          <button mat-button (click)="tourService.end()">{{step?.endBtnTitle}}</button>\n        </mat-card-actions>\n      </mat-card>\n    </ng-template>\n  ',styles:["\n      ::ng-deep .tour-step .mat-menu-content { \n          padding: 0 !important; \n      }\n  "]}]}],e.ctorParameters=function(){return[{type:d},{type:p}]},e.propDecorators={tourStep:[{type:r.ViewChild,args:[t.MatMenu]}],stepTemplate:[{type:r.Input},{type:r.ContentChild,args:[r.TemplateRef]}]},e}(n.TourHotkeyListenerComponent),g=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}([d,m],n.TourModule.forRoot().providers,[p])}},e.decorators=[{type:r.NgModule,args:[{declarations:[h,f,l],entryComponents:[l],exports:[h,f,n.TourModule],imports:[a.CommonModule,n.TourModule,t.MatMenuModule,t.MatCardModule,t.MatButtonModule,t.MatIconModule]}]}],e}();e.TourService=p,e.TourMatMenuModule=g,e.TourAnchorMatMenuDirective=h,e.TourStepTemplateComponent=f,e.ɵa=p,e.ɵd=l,e.ɵc=m,e.ɵb=d,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-tour-md-menu.umd.min.js.map